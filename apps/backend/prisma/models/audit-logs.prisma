enum AuditAction {
    CREATE
    UPDATE
    DELETE
    RESTORE
    LOGIN
    LOGOUT
    PASSWORD_CHANGE
    PERMISSION_CHANGE
    ORDER_STATUS_CHANGE
    INVENTORY_ADJUST
}

enum ActorType {
    STAFF
    USER
    SYSTEM
}

model AuditLog {
    id           Int         @id @default(autoincrement())
    requestId    String?
    actorId      Int?
    actorType    ActorType
    entityType   String
    entityId     Int
    action       AuditAction
    previousData Json?
    newData      Json?
    metadata     Json?

    createdAt    DateTime    @default(now())

    @@index([actorId, actorType])
    @@index([entityType, entityId])
    @@index([action])
    @@index([createdAt])
    @@index([requestId])
}
