model Staff {
    id           Int    @id @default(autoincrement())
    fullname     String
    username     String
    passwordHash String
    telegramId   BigInt

    roleId Int
    role   Role @relation(fields: [roleId], references: [id])

    orders           Order[]
    refreshTokens    RefreshToken[]
    productHistories ProductHistory[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Role {
    id          Int      @id @default(autoincrement())
    name        String   @unique
    permissions String[]
    staffs      Staff[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model RefreshToken {
    id        Int      @id @default(autoincrement())
    token     String   @unique
    staffId   Int?
    staff     Staff?   @relation(fields: [staffId], references: [id])
    userId    Int?
    user      Users?   @relation(fields: [userId], references: [id])
    expiredAt DateTime
    revoked   Boolean  @default(false)
    userAgent String?
    ipAddress String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
